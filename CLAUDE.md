# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Repository Overview

This is a Homebrew tap repository for distributing CLI tools. Formulas are stored in the `Formula/` directory and follow Homebrew's Ruby DSL format.

## Architecture

### Formula Structure

Formulas are automatically generated by GoReleaser and should not be manually edited. Each formula:
- Lives in `Formula/<name>.rb`
- Contains platform-specific (macOS/Linux) and architecture-specific (Intel/ARM) binary URLs
- Includes SHA256 checksums for verification
- Has a `test do` block that verifies installation

### Distribution Flow

1. Releases are published in the source project repositories (e.g., `josephschmitt/pj`)
2. GoReleaser automatically generates/updates the formula file in this tap
3. Users install via `brew tap josephschmitt/tap` then `brew install <formula-name>`

## Working with Formulas

### DO NOT Manually Edit Generated Formulas

Files in `Formula/` that contain the comment `# This file was generated by GoReleaser. DO NOT EDIT.` are automatically managed. Changes should be made in the source project's GoReleaser configuration, not here.

### Testing a Formula Locally

```bash
# Test the formula
brew test pj

# Install locally to verify
brew install --build-from-source Formula/pj.rb

# Audit the formula for issues
brew audit --strict pj

# Verify the formula style
brew style pj
```

### Adding a New Formula

New formulas should be added via GoReleaser in the source project. The GoReleaser configuration should include this tap as a target for formula generation.

## Common Tasks

### Verify Formula Installation
```bash
brew install Formula/<formula-name>.rb
<formula-name> --version
brew uninstall <formula-name>
```

### Update Formula URLs/Checksums
This is handled automatically by GoReleaser. To manually verify checksums if needed:
```bash
curl -sL <url> | shasum -a 256
```

## Repository Conventions

- Formula filenames match the class name: `pj.rb` defines `class Pj`
- Each formula must have a `desc`, `homepage`, `version`, and `license`
- Test blocks should minimally verify the binary runs (e.g., `--version`)
